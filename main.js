!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},t=(e,t,o)=>{e.querySelector(`#${t.id}-error`).textContent="",t.classList.remove(o.inputErrorClass)},o=(e,t)=>{e.setAttribute("disabled",!0),e.classList.add(t.inactiveButtonClass)},n=(e,t,n)=>{(e=>e.some(e=>!e.validity.valid))(e)?o(t,n):(t.removeAttribute("disabled"),t.classList.remove(n.inactiveButtonClass))},r=document.querySelector(".profile__edit-button"),c=document.querySelector("#edit-profile-modal"),a=(c.querySelector(".modal__close"),document.forms["edit-profile-form"]),s=a.elements["profile-name-input"],i=a.elements["profile-description-input"],l=document.querySelector(".profile__name"),u=document.querySelector(".profile__description"),m=document.querySelector(".profile__post-button"),d=document.querySelector("#new-post-modal"),p=(d.querySelector(".modal__close"),document.forms["new-post-form"]),f=p.querySelector(".modal__submit-button"),_=p.elements["card-caption-input"],y=p.elements["card-image-input"],v=document.querySelector("#preview-modal"),S=(v.querySelector(".modal__close"),v.querySelector(".modal__image")),g=v.querySelector(".modal__caption"),h=document.querySelector("#card-template").content.querySelector(".card"),q=document.querySelector(".cards");document.querySelectorAll(".modal__close").forEach(function(e){const t=e.closest(".modal");e.addEventListener("click",()=>k(t))});const w=function(e){"Escape"===e.key&&k(document.querySelector(".modal_is-opened"))},b=function(e){e.target===e.currentTarget&&k(document.querySelector(".modal_is-opened"))};function E(e){e.classList.add("modal_is-opened"),document.addEventListener("keydown",w),e.addEventListener("click",b)}function k(e){e.classList.remove("modal_is-opened"),document.removeEventListener("keydown",w),e.removeEventListener("click",b)}function L(e,t="prepend"){const o=function(e){const t=h.cloneNode(!0),o=t.querySelector(".card__title"),n=t.querySelector(".card__image");n.src=e.link,n.alt=e.name,o.textContent=e.name;const r=t.querySelector(".card__icon-button");return r.addEventListener("click",function(){r.classList.toggle("card__icon-button_active")}),t.querySelector(".card__delete-button").addEventListener("click",function(){t.remove()}),n.addEventListener("click",function(){S.src=e.link,S.alt=e.name,g.textContent=e.name,E(v)}),t}(e);q[t](o)}var x;[{name:"Golden Gate Bridge",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach(function(e){L(e)}),r.addEventListener("click",function(){var o,n,r;s.value=l.textContent,i.value=u.textContent,o=a,n=Array.from(a.querySelectorAll(".modal__input")),r=e,n.forEach(e=>{t(o,e,r)}),E(c)}),a.addEventListener("submit",function(e){e.preventDefault(),l.textContent=s.value,u.textContent=i.value,k(c)}),p.addEventListener("submit",function(t){t.preventDefault(),L({name:_.value,link:y.value}),document.forms["new-post-form"].reset(),o(f,e),k(d)}),m.addEventListener("click",function(){E(d)}),x=e,document.querySelectorAll(x.formSelector).forEach(e=>{((e,o)=>{const r=Array.from(e.querySelectorAll(o.inputSelector)),c=e.querySelector(o.submitButtonSelector);n(r,c,o),r.forEach(a=>{a.addEventListener("input",function(){((e,o,n)=>{o.validity.valid?t(e,o,n):((e,t,o,n)=>{e.querySelector(`#${t.id}-error`).textContent=o,t.classList.add(n.inputErrorClass)})(e,o,o.validationMessage,n)})(e,a,o),n(r,c,o)})})})(e,x)})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QW1CeEIsWUFBY3NCLEVBQXdCK0MsTUFDekQxQixFQUFXMUIsRUFDYixHQWtFQVUsRUFBWWUsaUJBQWlCLFNBaEU3QixTQUE2QkcsR0FDM0JBLEVBQU0yQixpQkFLTnBCLEVBSm9CLENBQ2xCWSxLQUFNbkMsRUFBaUJ3QyxNQUN2QlAsS0FBTWhDLEVBQWV1QyxRQUl2QnJELFNBQVNHLE1BQU0saUJBQWlCc0QsUUFFaEN0RSxFQUFjeUIsRUFBcUJ6QyxHQUVuQ3dELEVBQVdqQixFQUNiLEdBcURBRCxFQUFjaUIsaUJBQWlCLFFBQVMsV0FDdENRLEVBQVV4QixFQUNaLEdEbkdpQzdCLEVDcUdoQlYsRURwR0U2QixTQUFTcUIsaUJBQWlCeEMsRUFBT1QsY0FDekNrRCxRQUFTM0MsSUFsQk0rRSxFQUFDL0UsRUFBYUUsS0FDdEMsTUFBTVcsRUFBWThELE1BQU1DLEtBQ3RCNUUsRUFBWTBDLGlCQUFpQnhDLEVBQU9SLGdCQUVoQ2UsRUFBZ0JULEVBQVlHLGNBQWNELEVBQU9QLHNCQUV2RGlCLEVBQWtCQyxFQUFXSixFQUFlUCxHQUU1Q1csRUFBVThCLFFBQVMxQyxJQUNqQkEsRUFBYThDLGlCQUFpQixRQUFTLFdBaERoQmlDLEVBQUNoRixFQUFhQyxFQUFjQyxLQUNoREQsRUFBYWdCLFNBQVNDLE1BUXpCbkIsRUFBZUMsRUFBYUMsRUFBY0MsR0FyQnZCK0UsRUFBQ2pGLEVBQWFDLEVBQWNpRixFQUFjaEYsS0FDMUNGLEVBQVlHLGNBQWMsSUFBSUYsRUFBYUcsWUFDbkRDLFlBQWM2RSxFQUMzQmpGLEVBQWFLLFVBQVVLLElBQUlULEVBQU9MLGtCQVdoQ29GLENBQ0VqRixFQUNBQyxFQUNBQSxFQUFha0Ysa0JBQ2JqRixJQTJDQThFLENBQW1CaEYsRUFBYUMsRUFBY0MsR0FDOUNVLEVBQWtCQyxFQUFXSixFQUFlUCxFQUM5QyxNQU9BNkUsQ0FBa0IvRSxFQUFhRSxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnV0dG9uX2luYWN0aXZlXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvclwiLFxufTtcblxuY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xufTtcblxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG59O1xuXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgc2hvd0lucHV0RXJyb3IoXG4gICAgICBmb3JtRWxlbWVudCxcbiAgICAgIGlucHV0RWxlbWVudCxcbiAgICAgIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSxcbiAgICAgIGNvbmZpZ1xuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcbiAgfVxufTtcblxuY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCwgY29uZmlnKSA9PiB7XG4gIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXQpID0+IHtcbiAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBkaXNhYmxlQnV0dG9uID0gKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBidXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xuICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xufTtcblxuZXhwb3J0IGNvbnN0IHJlc2V0VmFsaWRhdGlvbiA9IChmb3JtRWxlbWVudCwgaW5wdXRMaXN0LCBjb25maWcpID0+IHtcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0LCBjb25maWcpO1xuICB9KTtcbn07XG5cbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGlmIChoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0LCBjb25maWcpKSB7XG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgfVxufTtcblxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpXG4gICk7XG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQsIGNvbmZpZyk7XG4gIH0pO1xufTtcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQge1xuICBlbmFibGVWYWxpZGF0aW9uLFxuICBzZXR0aW5ncyxcbiAgcmVzZXRWYWxpZGF0aW9uLFxufSBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzXCI7XG5pbXBvcnQgeyBkaXNhYmxlQnV0dG9uIH0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIkdvbGRlbiBHYXRlIEJyaWRnZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy83LXBob3RvLWJ5LWdyaWZmaW4td29vbGRyaWRnZS1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTW91bnRhaW4gaG91c2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNi1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlR1bm5lbCB3aXRoIG1vcm5pbmcgbGlnaHRcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNS1waG90by1ieS12YW4tYW5oLW5ndXllbi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQSB2ZXJ5IGxvbmcgYnJpZGdlLCBvdmVyIHRoZSBmb3Jlc3QgYW5kIHRocm91Z2ggdGhlIHRyZWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzQtcGhvdG8tYnktbWF1cmljZS1sYXNjaGV0LWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJBbiBvdXRkb29yIGNhZmVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMy1waG90by1ieS10dWJhbnVyLWRvZ2FuLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJSZXN0YXVyYW50IHRlcnJhY2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMi1waG90by1ieS1jZWlsaW5lLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYWwgVGhvcmVuc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8xLXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbl07XG5cbmNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcHJvZmlsZS1tb2RhbFwiKTtcbmNvbnN0IGVkaXRQcm9maWxlQ2xvc2VCdXR0b24gPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuY29uc3QgZWRpdFByb2ZpbGVGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJlZGl0LXByb2ZpbGUtZm9ybVwiXTtcbmNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBlZGl0UHJvZmlsZUZvcm0uZWxlbWVudHNbXCJwcm9maWxlLW5hbWUtaW5wdXRcIl07XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9XG4gIGVkaXRQcm9maWxlRm9ybS5lbGVtZW50c1tcInByb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIl07XG5cbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcblxuY29uc3QgbmV3UG9zdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fcG9zdC1idXR0b25cIik7XG5jb25zdCBuZXdQb3N0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ldy1wb3N0LW1vZGFsXCIpO1xuY29uc3QgbmV3UG9zdENsb3NlQnV0dG9uID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuY29uc3QgbmV3UG9zdEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcIm5ldy1wb3N0LWZvcm1cIl07XG5jb25zdCBuZXdQb3N0U3VibWl0QnV0dG9uID0gbmV3UG9zdEZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiKTtcblxuY29uc3QgcG9zdENhcHRpb25JbnB1dCA9IG5ld1Bvc3RGb3JtLmVsZW1lbnRzW1wiY2FyZC1jYXB0aW9uLWlucHV0XCJdO1xuY29uc3QgcG9zdEltYWdlSW5wdXQgPSBuZXdQb3N0Rm9ybS5lbGVtZW50c1tcImNhcmQtaW1hZ2UtaW5wdXRcIl07XG5cbmNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcbmNvbnN0IHByZXZpZXdDbG9zZUJ1dHRvbiA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcbmNvbnN0IHByZXZpZXdJbWFnZSA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbmNvbnN0IHByZXZpZXdDYXB0aW9uID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XG5cbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XG4gIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIilcbiAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xuY29uc3QgY2FyZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNcIik7XG5cbmNvbnN0IGNsb3NlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Nsb3NlXCIpO1xuXG5jbG9zZUJ1dHRvbnMuZm9yRWFjaChmdW5jdGlvbiAoYnV0dG9uKSB7XG4gIGNvbnN0IG1vZGFsID0gYnV0dG9uLmNsb3Nlc3QoXCIubW9kYWxcIik7XG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VNb2RhbChtb2RhbCkpO1xufSk7XG5cbmNvbnN0IGNsb3NlT25Fc2NhcGUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgIGNsb3NlTW9kYWwoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9pcy1vcGVuZWRcIikpO1xuICB9XG59O1xuXG5jb25zdCBjbG9zZU9uT3ZlcmxheSA9IGZ1bmN0aW9uIChldmVudCkge1xuICBpZiAoZXZlbnQudGFyZ2V0ID09PSBldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgY2xvc2VNb2RhbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX2lzLW9wZW5lZFwiKSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBjbG9zZU9uRXNjYXBlKTtcbiAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlT25PdmVybGF5KTtcbn1cblxuZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBjbG9zZU9uRXNjYXBlKTtcbiAgbW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlT25PdmVybGF5KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRWRpdFByb2ZpbGVTdWJtaXQoZXZlbnQpIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBwcm9maWxlTmFtZUlucHV0LnZhbHVlO1xuICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZTtcbiAgY2xvc2VNb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTmV3UG9zdFN1Ym1pdChldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBpbnB1dFZhbHVlcyA9IHtcbiAgICBuYW1lOiBwb3N0Q2FwdGlvbklucHV0LnZhbHVlLFxuICAgIGxpbms6IHBvc3RJbWFnZUlucHV0LnZhbHVlLFxuICB9O1xuICByZW5kZXJDYXJkKGlucHV0VmFsdWVzKTtcblxuICBkb2N1bWVudC5mb3Jtc1tcIm5ldy1wb3N0LWZvcm1cIl0ucmVzZXQoKTtcblxuICBkaXNhYmxlQnV0dG9uKG5ld1Bvc3RTdWJtaXRCdXR0b24sIHNldHRpbmdzKTtcblxuICBjbG9zZU1vZGFsKG5ld1Bvc3RNb2RhbCk7XG59XG5cbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGRhdGEpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xuICBjb25zdCBjYXJkVGl0bGUgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICBjb25zdCBjYXJkSW1hZ2UgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuXG4gIGNhcmRJbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gIGNhcmRJbWFnZS5hbHQgPSBkYXRhLm5hbWU7XG4gIGNhcmRUaXRsZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcblxuICBjb25zdCBsaWtlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pY29uLWJ1dHRvblwiKTtcbiAgbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgIGxpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2ljb24tYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfSk7XG5cbiAgY29uc3QgZGVsZXRlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xuICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgfSk7XG5cbiAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgcHJldmlld0ltYWdlLnNyYyA9IGRhdGEubGluaztcbiAgICBwcmV2aWV3SW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xuICAgIHByZXZpZXdDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIG9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5mdW5jdGlvbiByZW5kZXJDYXJkKGl0ZW0sIG1ldGhvZCA9IFwicHJlcGVuZFwiKSB7XG4gIGNvbnN0IGNhcmQgPSBnZXRDYXJkRWxlbWVudChpdGVtKTtcbiAgY2FyZENvbnRhaW5lclttZXRob2RdKGNhcmQpO1xufVxuaW5pdGlhbENhcmRzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgcmVuZGVyQ2FyZChpdGVtKTtcbn0pO1xuXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBwcm9maWxlTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWUudGV4dENvbnRlbnQ7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xuICByZXNldFZhbGlkYXRpb24oXG4gICAgZWRpdFByb2ZpbGVGb3JtLFxuICAgIEFycmF5LmZyb20oZWRpdFByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpKSxcbiAgICBzZXR0aW5nc1xuICApO1xuICBvcGVuTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XG59KTtcblxuZWRpdFByb2ZpbGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlRWRpdFByb2ZpbGVTdWJtaXQpO1xuXG5uZXdQb3N0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZU5ld1Bvc3RTdWJtaXQpO1xuXG5uZXdQb3N0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIG9wZW5Nb2RhbChuZXdQb3N0TW9kYWwpO1xufSk7XG5cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuIl0sIm5hbWVzIjpbInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJoaWRlSW5wdXRFcnJvciIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiY29uZmlnIiwicXVlcnlTZWxlY3RvciIsImlkIiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJkaXNhYmxlQnV0dG9uIiwiYnV0dG9uRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImFkZCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRMaXN0IiwiaGFzSW52YWxpZElucHV0Iiwic29tZSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsInJlbW92ZUF0dHJpYnV0ZSIsImVkaXRQcm9maWxlQnV0dG9uIiwiZG9jdW1lbnQiLCJlZGl0UHJvZmlsZU1vZGFsIiwiZWRpdFByb2ZpbGVGb3JtIiwiZm9ybXMiLCJwcm9maWxlTmFtZUlucHV0IiwiZWxlbWVudHMiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwibmV3UG9zdEJ1dHRvbiIsIm5ld1Bvc3RNb2RhbCIsIm5ld1Bvc3RGb3JtIiwibmV3UG9zdFN1Ym1pdEJ1dHRvbiIsInBvc3RDYXB0aW9uSW5wdXQiLCJwb3N0SW1hZ2VJbnB1dCIsInByZXZpZXdNb2RhbCIsInByZXZpZXdJbWFnZSIsInByZXZpZXdDYXB0aW9uIiwiY2FyZFRlbXBsYXRlIiwiY29udGVudCIsImNhcmRDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImJ1dHRvbiIsIm1vZGFsIiwiY2xvc2VzdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbG9zZU1vZGFsIiwiY2xvc2VPbkVzY2FwZSIsImV2ZW50Iiwia2V5IiwiY2xvc2VPbk92ZXJsYXkiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0Iiwib3Blbk1vZGFsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbmRlckNhcmQiLCJpdGVtIiwibWV0aG9kIiwiY2FyZCIsImRhdGEiLCJjYXJkRWxlbWVudCIsImNsb25lTm9kZSIsImNhcmRUaXRsZSIsImNhcmRJbWFnZSIsInNyYyIsImxpbmsiLCJhbHQiLCJuYW1lIiwibGlrZUJ1dHRvbiIsInRvZ2dsZSIsImdldENhcmRFbGVtZW50IiwicmVzZXRWYWxpZGF0aW9uIiwidmFsdWUiLCJBcnJheSIsImZyb20iLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJzaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZSIsInZhbGlkYXRpb25NZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==